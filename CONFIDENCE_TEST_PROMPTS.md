# 置信度驱动决策测试提示词

快速测试置信度驱动决策功能的提示词列表。直接在 Agent 聊天界面中输入测试。

---

## 🟢 高置信度测试（应直接执行）

### 完整的记账信息
```
记一笔餐饮支出，早餐 15 元，微信支付
```
**预期：** 直接创建，无需询问

```
花了 50 块打车，支付宝
```
**预期：** 直接创建，分类自动识别为"交通"

```
收入 5000 元，工资
```
**预期：** 直接创建收入记录

### 明确的查询请求
```
查询本月餐饮类的支出总额
```
**预期：** 直接查询并展示结果

```
统计上周的交通支出
```
**预期：** 直接统计并展示

```
查看最近 10 条消费记录
```
**预期：** 直接查询最近记录

---

## 🟡 中置信度测试（应推测后执行）

### 缺少部分信息（可推断）
```
花了 50 块打车
```
**预期：** 自动推断分类为"交通"，支付方式用默认值

```
午餐花了 35 元
```
**预期：** 自动推断分类为"餐饮"，支付方式用默认值

```
买菜 80
```
**预期：** 自动推断分类为"食品"或"购物"

### 模糊的时间描述
```
查一下最近的消费
```
**预期：** 默认查询最近 7 天

```
看看这周花了多少钱
```
**预期：** 自动计算本周时间范围

```
统计这个月的支出
```
**预期：** 自动使用当前月份

---

## 🔴 低置信度测试（应询问用户）

### 完全缺少关键信息
```
帮我记一笔
```
**预期：** 询问金额和用途

```
记个账
```
**预期：** 询问详细信息

```
添加一条支出
```
**预期：** 询问金额等信息

### 目标不明确
```
查一下
```
**预期：** 询问要查询什么

```
看看
```
**预期：** 询问查看什么内容

```
统计一下
```
**预期：** 询问统计的时间范围和分类

### 模糊的操作
```
删除那条记录
```
**预期：** 询问要删除哪一条

```
修改一下
```
**预期：** 询问要修改什么

```
50
```
**预期：** 询问这是支出还是收入，用在哪里

---

## 🔄 上下文理解测试

### 测试 1：分步补充金额
```
第一轮：记一笔餐饮
第二轮：30
```
**预期：** 第二轮应理解 30 是金额

### 测试 2：分步补充时间
```
第一轮：查询餐饮支出
第二轮：本月
```
**预期：** 第二轮应理解"本月"是时间范围

### 测试 3：补充分类
```
第一轮：花了 100 块
第二轮：买衣服
```
**预期：** 第二轮应理解"买衣服"是分类信息

---

## 📦 批量操作测试

```
今天买菜 50，打车 20，午餐 35
```
**预期：** 识别为批量操作，创建 3 条记录

```
记三笔：早餐 15，咖啡 30，午餐 40
```
**预期：** 批量创建 3 条记录

```
昨天：早餐 20 元，午餐 35 元，晚餐 45 元，都是餐饮
```
**预期：** 批量创建，日期都是昨天

---

## 🎯 边界测试（用于调整阈值）

### 测试低阈值效果（默认 0.4）
```
花了 100 买东西
```
**默认阈值：** 可能推测为"购物"，直接执行  
**严格阈值（0.6）：** 可能询问具体买了什么

### 测试高阈值效果（默认 0.7）
```
午餐 35
```
**默认阈值：** 推测分类和支付方式，直接执行  
**宽松阈值（0.5）：** 更大可能直接执行

---

## 🧪 特殊场景测试

### 模糊金额
```
大概 50 左右的餐费
```
**预期：** 识别金额为 50

### 多种表述
```
今天中午吃饭花了三十五块
```
**预期：** 识别金额 35，分类"餐饮"

### 包含时间
```
昨天晚上打车花了 40
```
**预期：** 日期设为昨天

### 负面表述
```
不记得具体金额，大概几十块的午餐
```
**预期：** 低置信度，询问具体金额

---

## 📊 测试评估标准

### 1. 准确性
- ✅ 正确识别意图类型
- ✅ 正确提取结构化信息
- ✅ 合理的置信度评分

### 2. 用户体验
- ✅ 询问频率合理（不过多也不过少）
- ✅ 推测结果准确
- ✅ 澄清问题友好自然

### 3. 响应速度
- ✅ 意图识别快速（< 2秒）
- ✅ 不卡顿

---

## 🔧 快速调整指南

### 如果询问太多
```typescript
userPreferences: {
  intentRewriterConfidenceThresholds: {
    low: 0.3,  // 从 0.4 降低到 0.3
  }
}
```

### 如果推测不准
```typescript
userPreferences: {
  intentRewriterConfidenceThresholds: {
    low: 0.5,  // 从 0.4 提高到 0.5
  }
}
```

---

**提示：** 按顺序测试，观察每个场景下的 Agent 行为，记录不符合预期的情况。
