# è®¡ç®—å™¨é”®ç›˜åŠŸèƒ½è¯´æ˜

## ğŸ“± åŠŸèƒ½æ¦‚è¿°

ä¸ºæ–°å¢äº¤æ˜“é¡µé¢çš„æ•°å­—é”®ç›˜æ·»åŠ äº†**åŠ å‡è®¡ç®—**åŠŸèƒ½ï¼Œè®©ç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨é”®ç›˜ä¸Šè¿›è¡Œç®€å•çš„é‡‘é¢è®¡ç®—ã€‚

## âœ¨ æ–°å¢åŠŸèƒ½

### 1ï¸âƒ£ **åŠ æ³•è®¡ç®—**
ç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨é”®ç›˜ä¸Šç´¯åŠ å¤šä¸ªé‡‘é¢ï¼š
- è¾“å…¥ `50` â†’ ç‚¹å‡» `+` â†’ è¾“å…¥ `30` â†’ ç‚¹å‡» `+` â†’ è¾“å…¥ `20`
- è‡ªåŠ¨è®¡ç®—ç»“æœï¼š`100`
- æ˜¾ç¤ºå®Œæ•´è¡¨è¾¾å¼ï¼š`50 + 30 + 20`

**ä½¿ç”¨åœºæ™¯**ï¼š
- å¤šä¸ªå°ç¥¨åˆå¹¶è®°è´¦
- é¤å…AAåˆ¶åˆ†æ‘Š
- å¤šé¡¹è´¹ç”¨ç´¯åŠ 

### 2ï¸âƒ£ **å‡æ³•è®¡ç®—**
ç”¨æˆ·å¯ä»¥ä»æ€»é‡‘é¢ä¸­æ‰£å‡éƒ¨åˆ†é‡‘é¢ï¼š
- è¾“å…¥ `100` â†’ ç‚¹å‡» `-` â†’ è¾“å…¥ `20` â†’ ç‚¹å‡» `-` â†’ è¾“å…¥ `10`
- è‡ªåŠ¨è®¡ç®—ç»“æœï¼š`70`
- æ˜¾ç¤ºå®Œæ•´è¡¨è¾¾å¼ï¼š`100 - 20 - 10`

**ä½¿ç”¨åœºæ™¯**ï¼š
- é€€æ¬¾åçš„å®é™…æ”¯å‡º
- ä¼˜æƒ åˆ¸æŠµæ‰£è®¡ç®—
- æ‰¾é›¶åçš„å®ä»˜é‡‘é¢

### 3ï¸âƒ£ **æ··åˆè¿ç®—**
æ”¯æŒåŠ å‡æ··åˆè®¡ç®—ï¼š
- è¾“å…¥ `100` â†’ ç‚¹å‡» `+` â†’ è¾“å…¥ `50` â†’ ç‚¹å‡» `-` â†’ è¾“å…¥ `30`
- è‡ªåŠ¨è®¡ç®—ç»“æœï¼š`120`
- æ˜¾ç¤ºå®Œæ•´è¡¨è¾¾å¼ï¼š`100 + 50 - 30`

## ğŸ¨ ç•Œé¢è®¾è®¡

### Google/Telegram é£æ ¼
- **ç®€æ´åœ†æ¶¦**ï¼šæŒ‰é”®é‡‡ç”¨åœ†è§’è®¾è®¡ï¼Œé˜´å½±æŸ”å’Œ
- **æ¸…æ™°å¯¹æ¯”**ï¼š
  - æ•°å­—é”®ï¼šç™½è‰²èƒŒæ™¯ (Colors.surface)
  - åˆ é™¤é”®ï¼šæµ…ç°èƒŒæ™¯ (Colors.backgroundSecondary)
  - æ“ä½œç¬¦é”®ï¼šä¸»é¢˜è‰²åŠé€æ˜èƒŒæ™¯ (Colors.primary + '15')
- **è§†è§‰å±‚æ¬¡**ï¼šæ“ä½œç¬¦é”®å¸¦è¾¹æ¡†ï¼Œçªå‡ºå¯äº¤äº’æ€§

### å¸ƒå±€ç»“æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1    2    3            â”‚   +    â”‚
â”‚  4    5    6            â”‚   âˆ’    â”‚
â”‚  7    8    9            â”‚        â”‚
â”‚  .    0    âŒ«            â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- å·¦ä¾§ï¼š4Ã—3 æ•°å­—é”®ç›˜
- å³ä¾§ï¼š2Ã—1 æ“ä½œç¬¦åˆ—ï¼ˆåŠ å·ã€å‡å·ï¼‰
- é—´è·ï¼š8px (Spacing.xs)
- æŒ‰é”®é«˜åº¦ï¼š56px

## ğŸ’¡ äº¤äº’ç»†èŠ‚

### å®æ—¶è®¡ç®—æ˜¾ç¤º
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   50 + 30 + 20           â”‚  â† è¡¨è¾¾å¼ï¼ˆç°è‰²å°å­—ï¼‰
â”‚   Â¥100                    â”‚  â† å½“å‰ç»“æœï¼ˆå¤§å·ä¸»è‰²ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¡¨è¾¾å¼æ˜¾ç¤ºè§„åˆ™
1. **åˆå§‹çŠ¶æ€**ï¼šåªæ˜¾ç¤ºé‡‘é¢ï¼Œä¸æ˜¾ç¤ºè¡¨è¾¾å¼
2. **æ·»åŠ æ“ä½œç¬¦å**ï¼š
   - ä¸Šæ–¹æ˜¾ç¤ºï¼š`50 +` 
   - ä¸‹æ–¹æ˜¾ç¤ºï¼š`0`ï¼ˆç­‰å¾…è¾“å…¥ä¸‹ä¸€ä¸ªæ•°å­—ï¼‰
3. **è¾“å…¥ä¸‹ä¸€ä¸ªæ•°å­—**ï¼š
   - ä¸Šæ–¹æ˜¾ç¤ºï¼š`50 + 30`
   - ä¸‹æ–¹æ˜¾ç¤ºï¼š`80`ï¼ˆè‡ªåŠ¨è®¡ç®—ç»“æœï¼‰
4. **ç»§ç»­æ“ä½œ**ï¼š
   - ä¸Šæ–¹æ˜¾ç¤ºï¼š`50 + 30 - 10`
   - ä¸‹æ–¹æ˜¾ç¤ºï¼š`70`

### çŠ¶æ€é‡ç½®
- åˆ‡æ¢"æ”¯å‡º/æ”¶å…¥"æ—¶ï¼šæ¸…ç©ºé‡‘é¢å’Œè¡¨è¾¾å¼
- ä¿å­˜äº¤æ˜“åï¼šè‡ªåŠ¨è¿”å›ä¸Šä¸€é¡µ
- åˆ é™¤æŒ‰é’®ï¼šä»…åˆ é™¤å½“å‰è¾“å…¥ï¼Œä¸å½±å“è¡¨è¾¾å¼

## ğŸ”§ æŠ€æœ¯å®ç°

### æ ¸å¿ƒç»„ä»¶æ›´æ–°

#### NumberKeypad.tsx
```typescript
interface NumberKeypadProps {
  onNumberPress: (num: string) => void;
  onDeletePress: () => void;
  onOperatorPress?: (operator: '+' | '-') => void; // æ–°å¢
}
```

**æ–°å¢æ ·å¼**ï¼š
- `mainKeypad`: ä¸»é”®ç›˜å®¹å™¨ï¼ˆæ¨ªå‘å¸ƒå±€ï¼‰
- `numbersSection`: æ•°å­—åŒºåŸŸï¼ˆflex: 1ï¼‰
- `operatorsSection`: æ“ä½œç¬¦åŒºåŸŸï¼ˆå›ºå®šå®½åº¦ 64pxï¼‰
- `operatorKey`: æ“ä½œç¬¦æŒ‰é”®æ ·å¼
- `deleteKey`: åˆ é™¤é”®å·®å¼‚åŒ–æ ·å¼

#### AddTransactionScreen.tsx
```typescript
// æ–°å¢çŠ¶æ€
const [expression, setExpression] = useState(''); // è®¡ç®—è¡¨è¾¾å¼

// æ–°å¢æ–¹æ³•
const handleOperatorPress = (operator: '+' | '-') => {
  // 1. è§£æå½“å‰è¡¨è¾¾å¼
  // 2. è®¡ç®—ç´¯è®¡ç»“æœ
  // 3. æ›´æ–°è¡¨è¾¾å¼æ˜¾ç¤º
  // 4. é‡ç½®å½“å‰è¾“å…¥
}
```

### è®¡ç®—é€»è¾‘
```typescript
// è¡¨è¾¾å¼è§£æ
const parts = expression.split(/([+\-])/);
// ["100", "+", "50", "-", "30"]

// é€æ­¥è®¡ç®—
let result = parseFloat(parts[0]); // 100
for (let i = 1; i < parts.length; i += 2) {
  const op = parts[i];        // "+"
  const num = parseFloat(parts[i + 1]); // 50
  if (op === '+') result += num;
  else if (op === '-') result -= num;
}
```

### ç²¾åº¦å¤„ç†
- ä¿ç•™ä¸¤ä½å°æ•°ï¼š`result.toFixed(2)`
- é˜²æ­¢æµ®ç‚¹è¯¯å·®ï¼šä½¿ç”¨ `parseFloat()` ç»Ÿä¸€å¤„ç†
- å°æ•°ç‚¹é™åˆ¶ï¼šæœ€å¤šè¾“å…¥ä¸¤ä½å°æ•°

## ğŸ“Š ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

### åœºæ™¯1ï¼šé¤å…èšé¤AA
```
ç”¨æˆ·æ“ä½œï¼š
1. è¾“å…¥ 250ï¼ˆæ€»é‡‘é¢ï¼‰
2. ç‚¹å‡» -
3. è¾“å…¥ 50ï¼ˆæœ‹å‹ä»˜çš„éƒ¨åˆ†ï¼‰
4. ç‚¹å‡» -
5. è¾“å…¥ 50ï¼ˆå¦ä¸€ä¸ªæœ‹å‹ä»˜çš„ï¼‰

æ˜¾ç¤ºï¼š
è¡¨è¾¾å¼ï¼š250 - 50 - 50
ç»“æœï¼šÂ¥150ï¼ˆè‡ªå·±éœ€è¦ä»˜çš„ï¼‰
```

### åœºæ™¯2ï¼šè´­ç‰©å°ç¥¨åˆå¹¶
```
ç”¨æˆ·æ“ä½œï¼š
1. è¾“å…¥ 38.5ï¼ˆè¶…å¸‚å°ç¥¨1ï¼‰
2. ç‚¹å‡» +
3. è¾“å…¥ 25ï¼ˆè¶…å¸‚å°ç¥¨2ï¼‰
4. ç‚¹å‡» +
5. è¾“å…¥ 12.5ï¼ˆè¶…å¸‚å°ç¥¨3ï¼‰

æ˜¾ç¤ºï¼š
è¡¨è¾¾å¼ï¼š38.5 + 25 + 12.5
ç»“æœï¼šÂ¥76ï¼ˆæ€»èŠ±è´¹ï¼‰
```

### åœºæ™¯3ï¼šä¼˜æƒ åˆ¸æŠµæ‰£
```
ç”¨æˆ·æ“ä½œï¼š
1. è¾“å…¥ 299ï¼ˆå•†å“åŸä»·ï¼‰
2. ç‚¹å‡» -
3. è¾“å…¥ 50ï¼ˆä¼˜æƒ åˆ¸ï¼‰
4. ç‚¹å‡» -
5. è¾“å…¥ 20ï¼ˆä¼šå‘˜æŠ˜æ‰£ï¼‰

æ˜¾ç¤ºï¼š
è¡¨è¾¾å¼ï¼š299 - 50 - 20
ç»“æœï¼šÂ¥229ï¼ˆå®ä»˜é‡‘é¢ï¼‰
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

### æ ·å¼ä¼˜åŒ–
- ä½¿ç”¨ `Shadows.sm` ç»Ÿä¸€é˜´å½±æ ·å¼
- é¿å…è¿‡åº¦æ¸²æŸ“ï¼šæ“ä½œç¬¦é”®ä»…åœ¨ä¼ å…¥å›è°ƒæ—¶æ˜¾ç¤º
- è§¦æ‘¸åé¦ˆï¼š`activeOpacity={0.7}` æä¾›å³æ—¶è§†è§‰åé¦ˆ

### è®¡ç®—ä¼˜åŒ–
- å•æ¬¡éå†è®¡ç®—ï¼šO(n) æ—¶é—´å¤æ‚åº¦
- é¿å…æ­£åˆ™è¡¨è¾¾å¼åµŒå¥—ï¼šåªç”¨äºåˆ†å‰²ï¼Œä¸ç”¨äºåŒ¹é…
- æå‰è¿”å›ï¼šé‡‘é¢ä¸º0æ—¶ä¸æ‰§è¡Œè®¡ç®—

### ç”¨æˆ·ä½“éªŒ
- å³æ—¶åé¦ˆï¼šç‚¹å‡»æ“ä½œç¬¦åç«‹å³æ˜¾ç¤ºç»“æœ
- é˜²è¯¯è§¦ï¼šæ•°å­—é”®å’Œæ“ä½œç¬¦é”®æœ‰æ˜æ˜¾çš„è§†è§‰åŒºåˆ†
- å®¹é”™å¤„ç†ï¼šè¡¨è¾¾å¼è§£æå¤±è´¥æ—¶ä¿æŒåŸå€¼

## ğŸ¯ åç»­å¢å¼ºå»ºè®®

### 1. é«˜çº§åŠŸèƒ½
- [ ] æ”¯æŒä¹˜é™¤è¿ç®—
- [ ] æ”¯æŒæ‹¬å·è¿ç®—
- [ ] è®¡ç®—å†å²è®°å½•
- [ ] è¡¨è¾¾å¼ç¼–è¾‘åŠŸèƒ½

### 2. UIæ”¹è¿›
- [ ] æ“ä½œç¬¦æŒ‰é”®æŒ‰ä¸‹åŠ¨ç”»
- [ ] è®¡ç®—ç»“æœå˜åŒ–æ—¶çš„æ•°å­—åŠ¨ç”»
- [ ] é•¿æŒ‰åˆ é™¤é”®å¿«é€Ÿæ¸…ç©º
- [ ] éœ‡åŠ¨åé¦ˆï¼ˆå¯é€‰ï¼‰

### 3. ä¾¿æ·åŠŸèƒ½
- [ ] å¿«é€Ÿæ¸…é™¤æŒ‰é’®ï¼ˆCé”®ï¼‰
- [ ] ç­‰å·é”®ï¼ˆç¡®è®¤è®¡ç®—ï¼‰
- [ ] ç™¾åˆ†æ¯”è®¡ç®—ï¼ˆ%é”®ï¼‰
- [ ] å¿«æ·é‡‘é¢æŒ‰é’®ï¼ˆ10/50/100ï¼‰

## ğŸ“ æ³¨æ„äº‹é¡¹

### è¾¹ç•Œæƒ…å†µ
1. **é™¤é›¶ä¿æŠ¤**ï¼šå½“å‰ç‰ˆæœ¬ä¸æ”¯æŒé™¤æ³•ï¼Œæ— éœ€å¤„ç†
2. **æº¢å‡ºä¿æŠ¤**ï¼šJavaScript Number ç±»å‹è‡ªåŠ¨å¤„ç†
3. **ç²¾åº¦é—®é¢˜**ï¼šä½¿ç”¨ `toFixed(2)` ä¿è¯ä¸¤ä½å°æ•°
4. **ç©ºè¾“å…¥**ï¼šé‡‘é¢ä¸º0æ—¶ä¸è§¦å‘è®¡ç®—

### å…¼å®¹æ€§
- âœ… å…¼å®¹ç¼–è¾‘æ¨¡å¼ï¼ˆåˆå§‹åŒ–ä¸ºåŸäº¤æ˜“é‡‘é¢ï¼‰
- âœ… å…¼å®¹æ”¶æ”¯ç±»å‹åˆ‡æ¢ï¼ˆè‡ªåŠ¨æ¸…ç©ºè¡¨è¾¾å¼ï¼‰
- âœ… ä¸å½±å“ç°æœ‰åŠŸèƒ½ï¼ˆå¯é€‰å‚æ•°ï¼Œå‘åå…¼å®¹ï¼‰

---

**æ›´æ–°æ—¥æœŸ**ï¼š2024å¹´11æœˆ  
**ç‰ˆæœ¬**ï¼šv1.0  
**çŠ¶æ€**ï¼šâœ… å·²å®ç°åŸºç¡€è®¡ç®—åŠŸèƒ½
